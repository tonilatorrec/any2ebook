# any2ebook

Converts links (stored individually in .md files like [Obsidian clippings](https://obsidian.md/clipper), or as a list of links in a text or JSON file) to epub files that can be read with ebook readers.
Websites are converted to readable text using the [Readability](https://github.com/mozilla/readability) tool through the [ReadabiliPy](https://github.com/alan-turing-institute/ReadabiliPy) Python wrapper.

## Setup
Install using `uv` as a tool:
```
uv tool install git+https://github.com/tonilatorrec/any2ebook.git
```

Or with `make`, this also creates the cli and gui executables:
```
make install
make build
```

## Inputs 
These inputs are supported:
1. (Default) Any `.md` file with a YAML front matter that has at least the `source` property will work. The files generated by the Obsidian Web Clipper have it by default. Example:
```yaml
---
source: "LINK_TO_ARTICLE"
# other properties 
---
# file content
```
Run: 
```
any2ebook
```

In this case, the program may ask for:
- **Clippings path**: path to the top level folder containing the `.md` files. For the Obsidian web clipper this can be the path to the vault where links are clipped.
- **Output path**: path where epub files are stored.

2. Any file containing either:
- a list of links (one per line), or
- a list of links in JSON format (`[{ captured_at, source, payload_type, payload_ref }, ...]`).

Examples:
```text 
// links.txt
"LINK_TO_ARTICLE_1"
"LINK_TO_ARTICLE_2"
...
"LINK_TO_ARTICLE_N"
```

```json
// links.json
[
    {
    "captured_at": "CAPTURED_AT",
    "source": "browser_extension",
    "payload_type": "url",
    "payload_ref": "LINK_TO_ARTICLE_1" 
    },
    // ...
]
```

Run: 
```
any2ebook -f links.txt
```

In this case only the output path is required, and invalid lines are skipped.

3. Mixed folder ingest for `.md` and `.json` in one inbox:
```
any2ebook --input-dir /path/to/inbox
```

This mode recursively scans the folder, ingests `.md` and `.json`, and tracks file state so unchanged files are skipped on later runs.

Each URL is attempted once. If the conversion fails it will be recorded and skipped in future runs. 
